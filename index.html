<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin & User (Google Sheets DB)</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; padding:20px; }
    .container { max-width:800px; margin:auto; background:#fff; padding:20px; border-radius:8px; }
    button { padding:8px 14px; margin:5px 0; }
    input, textarea { width:100%; padding:8px; margin:6px 0; }
    .hidden { display:none; }
    .box { border:1px solid #ccc; padding:10px; border-radius:4px; background:#fafafa; }
  </style>
</head>
<body>

<div class="container">
  <h2>Select Role</h2>
  <button onclick="showUser()">User</button>
  <button onclick="showAdminLogin()">Admin</button>

  <!-- USER -->
  <div id="userView" class="hidden">
    <h3>User View</h3>
    <div class="box" id="userContent">Loading...</div>
    <button onclick="back()">Back</button>
  </div>

  <!-- ADMIN LOGIN -->
  <div id="adminLogin" class="hidden">
    <h3>Admin Login</h3>
    <input id="adminId" placeholder="Admin ID" />
    <input id="adminPass" type="password" placeholder="Password" />
    <button onclick="loginAdmin()">Login</button>
    <p id="error" style="color:red"></p>
    <button onclick="back()">Back</button>
  </div>

  <!-- ADMIN PANEL -->
  <div id="adminPanel" class="hidden">
    <h3>Admin Panel (Google Sheets)</h3>
    <textarea id="adminText" rows="5" placeholder="Enter text..."></textarea>
    <button onclick="saveText()">Create / Update</button>
    <button onclick="deleteText()">Delete</button>
    <h4>Current Content:</h4>
    <div class="box" id="adminContent"></div>
    <button onclick="back()">Logout</button>
  </div>
</div>

<script>
  // ðŸ”´ REPLACE WITH YOUR GOOGLE APPS SCRIPT WEB APP URL
  const API_URL = 'https://script.google.com/macros/s/AKfycbzlvH9FrNFQ11NXcF6Y6ZXUuyXduvQxrJKBaKt_lQItdDsRhpV6vOe0D8tIxvHJ3CmeHA/exec';

  const ADMIN_ID = "14";
  const ADMIN_PASS = "2004";

  function hideAll(){
    ['userView','adminLogin','adminPanel'].forEach(id =>
      document.getElementById(id).classList.add('hidden'));
  }
  function back(){ hideAll(); }

  function showUser(){ hideAll(); document.getElementById('userView').classList.remove('hidden'); loadContent(); }
  function showAdminLogin(){ hideAll(); document.getElementById('adminLogin').classList.remove('hidden'); }

  function loginAdmin(){
    if(adminId.value===ADMIN_ID && adminPass.value===ADMIN_PASS){
      hideAll();
      document.getElementById('adminPanel').classList.remove('hidden');
      loadContent();
    } else {
      error.innerText = 'Invalid credentials';
    }
  }

  function loadContent(){
    fetch(API_URL)
      .then(res => res.json())
      .then(data => {
        const text = data.content || 'No content available';
        userContent.innerText = text;
        adminContent.innerText = text;
        adminText.value = text;
      });
  }

  function saveText(){
    fetch(API_URL, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ action:'save', content: adminText.value })
    }).then(() => loadContent());
  }

  function deleteText(){
    fetch(API_URL, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ action:'delete' })
    }).then(() => loadContent());
  }
</script>

</body>
</html>
